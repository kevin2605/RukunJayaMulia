CREATE TABLE systemlog(
	LogNum int NOT NULL auto_increment,
	timestamp DATETIME NOT NULL,
	UserID varchar(5) NOT NULL,
	ActionDone TINYTEXT,
	ActionMSG TINYTEXT,
	ActionStatus int(1),
	RecordID varchar(30),
	PRIMARY KEY (LogNum)
);

ALTER TABLE systemLog
  ADD CONSTRAINT FK_UserID_systemlog FOREIGN KEY (UserID) REFERENCES systemuser(UserID);

CREATE TABLE bank 
(
   	BankCode int(4),
   	BankName VARCHAR(150),
	PRIMARY KEY (BankCode)
);

CREATE TABLE TaxDetail(
	NPWPNum varchar(16) NOT NULL,
	NPWPName varchar(70) NOT NULL,
	NPWPAddress TINYTEXT NOT NULL,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (NPWPNum)
);

CREATE TABLE chartofaccount(
	AccountCD varchar(10) NOT NULL,
	AccountName varchar(100) NOT NULL,
	AcctType varchar(15) NOT NULL,
	DebitVsCredit varchar(6) NOT NULL,
	HeaderVsDetail varchar(6) NOT NULL,
	PRIMARY KEY (AccountCD)
);

CREATE TABLE TaxRate(
	RateCD varchar(6) NOT NULL,
	RateNum int(3) NOT NULL,
	Description TINYTEXT,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (RateCD)
);

CREATE TABLE ContactPerson(
	ContactNum int(5) NOT NULL,
	ContactName varchar(70) NOT NULL,
	ContactAdd TINYTEXT,
	ContactTel varchar(12),
	ContactPhone varchar(12) NOT NULL,
	ContactEmail varchar(50),
	Description TINYTEXT,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (ContactNum)
);

CREATE TABLE Shipment( ---- [NOTUSE] ----
	ShipmentID int(5) NOT NULL,
	ShipmentName varchar(30) NOT NULL,
	ShipmentAdd TINYTEXT,
	ShipmentCity varchar(20),
	Phone int(12),
	CustID int(5) NOT NULL,
	PRIMARY KEY (ShipmentID)
);

CREATE TABLE Payment(
	PaymentCD varchar(5) NOT NULL,
	PaymentName varchar(15) NOT NULL,
	Description varchar(30) NOT NULL,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (PaymentCD)
);

CREATE TABLE Journal(
	JournalCD varchar(20) NOT NULL,
	JournalName varchar(100) NOT NULL,
	JournalType varchar(10) NOT NULL,
	AccountCD varchar(10) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME NOT NULL,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (JournalCD)
);

CREATE TABLE Transaction(
	TransactionID int(3) NOT NULL,
	TransDesc varchar(20) NOT NULL,
	TransType varchar(10) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (TransactionID)
);

CREATE TABLE Category(
	CategoryCD varchar(5) NOT NULL UNIQUE,
	CategoryName varchar(20) NOT NULL,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (CategoryCD)
);

CREATE TABLE Groups(
	GroupCD varchar(5) NOT NULL UNIQUE,
	GroupName varchar(20) NOT NULL,
	Sequence int(5) NOT NULL,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (GroupCD)
);

CREATE TABLE Unit(
	UnitCD varchar(5) NOT NULL,
	UnitName varchar(15) NOT NULL,
	Description varchar(30),
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (UnitCD)
);

CREATE TABLE Warehouse(
	WarehCD varchar(10) NOT NULL,
	WarehName TINYTEXT NOT NULL,
	Description varchar(30),
	Address TINYTEXT,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (WarehCD)
);

CREATE TABLE systemuser(
	Username varchar(15) NOT NULL,
	Password varchar(15) NOT NULL,
	UserID varchar(5) UNIQUE,
	Name varchar(50) NOT NULL,
	CreatedOn datetime,
	PRIMARY KEY (UserID)
);

CREATE TABLE city(
	CityID int auto_increment,
	CityName varchar(50) NOT NULL,
	PRIMARY KEY (CityID)
);

CREATE TABLE Customer(
	CustID int(5) NOT NULL,
	CustName TINYTEXT NOT NULL,
	CompanyName TINYTEXT DEFAULT NULL,
	ShipmentAddress tinytext NOT NULL,
	CityName varchar(50) NOT NULL,
	PhoneNumOne varchar(15) NOT NULL,
	PhoneNumTwo varchar(15) DEFAULT NULL,
	Email TINYTEXT DEFAULT NULL,
	PriceListCD varchar(8) NOT NULL,
	NIK varchar(17) NOT NULL,
	KTPName TINYTEXT NOT NULL,
	KTPAddress TINYTEXT NOT NULL,
	NPWPName TINYTEXT NOT NULL,
	NPWPNum varchar(16) NOT NULL,
	NPWPAddress TINYTEXT NOT NULL,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME NOT NULL,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (CustID)
);

ALTER TABLE `customer`
  ADD CONSTRAINT `FK_PriceListCD_Cust` FOREIGN KEY (`PriceListCD`) REFERENCES `pricelistheader` (`PriceListCD`);

CREATE TABLE Supplier(
	SupplierNum int(5) NOT NULL,
	SupplierName TINYTEXT NOT NULL,
	SupplierAdd TINYTEXT NOT NULL,
	Email TINYTEXT DEFAULT NULL,
	Telepon varchar(15) DEFAULT NULL,
	PhoneNum varchar(15) DEFAULT NULL,
	NPWPName TINYTEXT NOT NULL,
	NPWPNum varchar(16) NOT NULL,
	NPWPAddress TINYTEXT NOT NULL,
	ContactName TINYTEXT DEFAULT NULL,
	ContactPhone varchar(15) DEFAULT NULL,
	BankCode varchar(4) NOT NULL,
	BeneficiaryNumber varchar(20) NOT NULL,
	Description TINYTEXT,
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (SupplierNum)
);

CREATE TABLE Product(
	ProductCD varchar(20) NOT NULL,
	ProductName TINYTEXT NOT NULL,
	Sequence int(5) NOT NULL,
	StockQty int(9) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	GroupCD varchar(5) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	WarehCD varchar(10) NOT NULL,
	SupplierNum int(5) NOT NULL,
	FanWeight int(3),
	FanPerSheet int(3),
	PcsPerBox int(4),
	BoxLength int(4),
	BoxWidth int(4),
	BoxHeight int(4),
	ModalPrice FLOAT DEFAULT NULL,
	Sales int(1),
	Purchase int(1),
	Production int(1),
	Transaction int(1),
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (ProductCD)
);

ALTER TABLE `product`
  ADD CONSTRAINT `FK_CategoryCD_Prod` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_GroupCD_Prod` FOREIGN KEY (`GroupCD`) REFERENCES `groups` (`GroupCD`),
  ADD CONSTRAINT `FK_WarehCD_Prod` FOREIGN KEY (`WarehCD`) REFERENCES `warehouse` (`WarehCD`),
  ADD CONSTRAINT `FK_UnitCD_Prod` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

  
CREATE TABLE salesorderheader(
	SalesOrderID varchar(15) NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	CreatedOn datetime DEFAULT NULL,
	Marketing varchar(5) NOT NULL,
	CustID int(5) NOT NULL,
	Logo varchar(30) DEFAULT NULL,
	Description tinytext DEFAULT NULL,
	Approval int(1) DEFAULT NULL,
	ApprovalStatus varchar(10) DEFAULT NULL,
	ApprovalBy varchar(5) DEFAULT NULL,
	ApprovalOn datetime DEFAULT NULL,
	LastEdit datetime DEFAULT NULL,
	Finish int(1) NOT NULL,
	PRIMARY KEY (SalesOrderID)
);

ALTER TABLE `salesorderheader`
  ADD CONSTRAINT `FK_CustID_soheader` FOREIGN KEY (`CustID`) REFERENCES `customer` (`CustID`);
  
CREATE TABLE salesorderdetail(
	SalesOrderID varchar(15) NOT NULL,
	CreatedOn datetime DEFAULT NULL,
	ProductCD varchar(10) NOT NULL,
	Quantity int(10) NOT NULL,
	Price int(6) NOT NULL,
	Discount FLOAT DEFAULT NULL,
	QuantitySent int(10) DEFAULT NULL,
);

ALTER TABLE `salesorderdetail`
  ADD CONSTRAINT `FK_SalesOrderID_sodetail` FOREIGN KEY (`SalesOrderID`) REFERENCES `salesorderheader` (`SalesOrderID`),
  ADD CONSTRAINT `FK_ProductCD_sodetail` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`);
  

CREATE TABLE approvallist(
	AppNumber int auto_increment,
	RefNumber varchar(15) NOT NULL UNIQUE,
	RefTable varchar(50) NOT NULL,
	ActionDone varchar(3) NOT NULL,
	Approval int(1) DEFAULT NULL,
	ApprovalBy varchar(5) DEFAULT NULL,
	ApprovalOn datetime DEFAULT NULL,
	PRIMARY KEY (AppNumber)
);


CREATE TABLE invoiceheader(
	InvoiceID varchar(15) NOT NULL,
	SalesOrderID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	TaxInvoiceNumber varchar(20) DEFAULT NULL,
	TaxInvoiceDate DATE DEFAULT NULL,
	CustID int(5) NOT NULL,
	AccountCD varchar(20) NOT NULL,
	PaymentCD varchar(5) NOT NULL,
	WarehCD varchar(10) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	LastEdit datetime NOT NULL,
	TotalInvoice FLOAT DEFAULT NULL,
	DPAmount FLOAT DEFAULT NULL,
	TotalPaid FLOAT DEFAULT NULL,
	PaidDate date DEFAULT NULL,
	InvoiceStatus int(1) NOT NULL,
	PrintCount int DEFAULT '1',
	PRIMARY KEY (InvoiceID)
);

ALTER TABLE `invoiceheader`
  ADD CONSTRAINT `FK_CustID_invheader` FOREIGN KEY (`CustID`) REFERENCES `customer` (`CustID`),
  ADD CONSTRAINT `FK_AccountCD_invheader` FOREIGN KEY (`AccountCD`) REFERENCES `chartofaccount` (`AccountCD`),
  ADD CONSTRAINT `FK_PaymentCD_invheader` FOREIGN KEY (`PaymentCD`) REFERENCES `payment` (`PaymentCD`),
  ADD CONSTRAINT `FK_WarehCD_invheader` FOREIGN KEY (`WarehCD`) REFERENCES `warehouse` (`WarehCD`),
  ADD CONSTRAINT `FK_SalesOrderID_invheader` FOREIGN KEY (`SalesOrderID`) REFERENCES `salesorderheader` (`SalesOrderID`),
  ADD CONSTRAINT `FK_ExpeditionID_invheader` FOREIGN KEY (`ExpeditionID`) REFERENCES `expedition` (`ExpeditionID`);

CREATE TABLE invoicedetail(
	InvoiceID  varchar(15) NOT NULL,
	CreatedOn datetime,
	ProductCD varchar(20) NOT NULL,
	Quantity int(10) NOT NULL,
	Price FLOAT NOT NULL,
	Discount FLOAT NOT NULL,
	Subtotal FLOAT NOT NULL
);

ALTER TABLE `invoicedetail`
  ADD CONSTRAINT `FK_ProductCD_invdetail` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`),
  ADD CONSTRAINT `FK_InvoiceID_invdetail` FOREIGN KEY (`InvoiceID`) REFERENCES `invoiceheader` (`InvoiceID`);
  
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

CREATE TABLE material(
	MaterialCD varchar(20) NOT NULL,
	MaterialName TINYTEXT NOT NULL,
	Sequence int(5) NOT NULL,
	StockQty int(9) NOT NULL,
	ProductCD varchar(20) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	GroupCD varchar(5) NOT NULL,
	UnitCD_1 varchar(5) NOT NULL,
	UnitCD_2 varchar(5) NOT NULL,
	WarehCD varchar(10) NOT NULL,
	SupplierNum int(5) NOT NULL,
	Desc_1 TINYTEXT DEFAULT NULL,
	Desc_2 TINYTEXT DEFAULT NULL,
	Desc_3 TINYTEXT DEFAULT NULL,
	BuyPrice FLOAT NOT NULL,
	AvgPrice FLOAT DEFAULT NULL,
	Sales int(1),
	Purchase int(1),
	Production int(1),
	Transaction int(1),
	Status int(1) NOT NULL,
	CreatedBy varchar(6) NOT NULL,
	CreatedOn DATETIME,
	LastEdit DATETIME NOT NULL,
	PRIMARY KEY (MaterialCD)
);

ALTER TABLE `material`
  ADD CONSTRAINT `FK_ProductCD_Material` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`),
  ADD CONSTRAINT `FK_CategoryCD_Material` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_GroupCD_Material` FOREIGN KEY (`GroupCD`) REFERENCES `groups` (`GroupCD`),
  ADD CONSTRAINT `FK_WarehCD_Material` FOREIGN KEY (`WarehCD`) REFERENCES `warehouse` (`WarehCD`);
  
==================================================================================================================================================

CREATE TABLE pricelistheader(
	PriceListCD varchar(8) NOT NULL,
	PriceListName TINYTEXT NOT NULL,
	MinimalOrder int(6) NOT NULL,
	StartDate date NOT NULL,
	EndDate date DEFAULT NULL,
	PRIMARY KEY(PriceListCD)
);

CREATE TABLE pricelistdetail(
	No int auto_increment,
	PriceListCD varchar(8) NOT NULL,
	ProductCD varchar(20) NOT NULL,
	Price int(10) NOT NULL
);

ALTER TABLE `pricelistdetail`
  ADD CONSTRAINT `FK_PriceListCD_pld` FOREIGN KEY (`PriceListCD`) REFERENCES `pricelistheader` (`PriceListCD`),
  ADD CONSTRAINT `FK_ProductCD_pld` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`);

=====================================================================================================================================================

CREATE TABLE productflowhistory(
	No auto_increment,
	Date datetime NOT NULL,
	ReferenceKey varchar(15) NOT NULL,
	ProductCD varchar(20) NOT NULL,
	FlowIn int(10) NOT NULL,
	FlowOut int(10) NOT NULL,
	Description TINYTEXT DEFAULT NULL
);

ALTER TABLE `productflowhistory`
  ADD CONSTRAINT `FK_ProductCD_pfh` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`);


=====================================================================================================================================================

CREATE TABLE mutationheader(
	MutationID varchar(13) NOT NULL,
	CreatedOn date NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	PRIMARY KEY (MutationID)
);

CREATE TABLE mutationdetail(
	MutationID varchar(13) NOT NULL,
	CreatedOn date NOT NULL,
	ProductCD varchar(20) NOT NULL,
	FlowIn int(10) NOT NULL,
	FlowOut int(10) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	Description TINYTEXT DEFAULT NULL
);

ALTER TABLE `mutationdetail`
  ADD CONSTRAINT `FK_MutationID_mutdetail` FOREIGN KEY (`MutationID`) REFERENCES `mutationheader` (`MutationID`),
  ADD CONSTRAINT `FK_ProductCD_mutdetail` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`);
  
CREATE TABLE mutationdetailmat(
	MutationID varchar(13) NOT NULL,
	CreatedOn date NOT NULL,
	MaterialCD varchar(20) NOT NULL,
	FlowIn int(10) NOT NULL,
	FlowOut int(10) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	Description TINYTEXT DEFAULT NULL
);

ALTER TABLE `mutationdetailmat`
  ADD CONSTRAINT `FK_MutationID_mutdetailmat` FOREIGN KEY (`MutationID`) REFERENCES `mutationheader` (`MutationID`),
  ADD CONSTRAINT `FK_MaterialCD_mutdetailmat` FOREIGN KEY (`MaterialCD`) REFERENCES `material` (`MaterialCD`);

======================================================================================================================================================

CREATE TABLE purchaseorderheader(
	PurchaseOrderID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	DeliveryDate date NOT NULL,
	ShippingAddress TINYTEXT NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	SupplierNum int(5) NOT NULL,
	Termin int(2) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	TotalPurchase float DEFAULT NULL,
	TotalPaid float DEFAULT NULL,
	ApprovalStatus varchar(10) DEFAULT NULL,
	ApprovalBy varchar(5) DEFAULT NULL,
	ApprovalOn datetime DEFAULT NULL,
	LastEdit datetime NOT NULL,
	Finish int(1) NOT NULL,
	PRIMARY KEY (PurchaseOrderID)
);

ALTER TABLE `purchaseorderheader`
  ADD CONSTRAINT `FK_CategoryCD_poheader` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_SupplierNum_poheader` FOREIGN KEY (`SupplierNum`) REFERENCES `supplier` (`SupplierNum`);
  
CREATE TABLE purchaseorderdetail(
	PurchaseOrderID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	ItemCD varchar(20) NOT NULL,
	Quantity int(10) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	Price FLOAT NOT NULL,
	Subtotal FLOAT NOT NULL,
	QuantityReceived int(10) NOT NULL
);

ALTER TABLE `purchaseorderdetail`
  ADD CONSTRAINT `FK_PurchaseOrderID_podetail` FOREIGN KEY (`PurchaseOrderID`) REFERENCES `purchaseorderheader` (`PurchaseOrderID`),
  ADD CONSTRAINT `FK_UnitCD_podetail` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);

CREATE TABLE materialflowhistory(
	No int auto_increment,
	Date datetime NOT NULL,
	ReferenceKey varchar(15) NOT NULL,
	MaterialCD varchar(20) NOT NULL,
	FlowIn int(10) NOT NULL,
	FlowOut int(10) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	PRIMARY KEY (No)
);

ALTER TABLE `materialflowhistory`
  ADD CONSTRAINT `FK_MaterialCD_mfh` FOREIGN KEY (`MaterialCD`) REFERENCES `material` (`MaterialCD`);

CREATE TABLE receptionheader(
	ReceptionID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	PurchaseOrderID varchar(15) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	WarehCD varchar(10) NOT NULL,
	Termin int(2) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	ShippingDoc	TINYTEXT NOT NULL,
	LastEdit datetime NOT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (ReceptionID)
);

ALTER TABLE `receptionheader`
  ADD CONSTRAINT `FK_PurchaseOrderID_receptionheader` FOREIGN KEY (`PurchaseOrderID`) REFERENCES `purchaseorderheader` (`PurchaseOrderID`),
  ADD CONSTRAINT `FK_CategoryCD_receptionheader` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_WarehCD_receptionheader` FOREIGN KEY (`WarehCD`) REFERENCES `warehouse` (`WarehCD`);

CREATE TABLE receptiondetail(
	ReceptionID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	ItemCD varchar(20) NOT NULL,
	Quantity_1 FLOAT NOT NULL,
	UnitCD_1 varchar(5) NOT NULL,
	Quantity_2 FLOAT DEFAULT NULL,
	UnitCD_2 varchar(5) DEFAULT NULL
);

ALTER TABLE `receptiondetail`
  ADD CONSTRAINT `FK_ReceptionID_receptiondetail` FOREIGN KEY (`ReceptionID`) REFERENCES `receptionheader` (`ReceptionID`);
  
================================================================================================================================================

CREATE TABLE materialavgpricehistory(
	No int auto_increment,
	Date date NOT NULL,
	MaterialCD varchar(20) NOT NULL,
	LastPrice FLOAT NOT NULL,
	PRIMARY KEY (No)
);

ALTER TABLE `materialavgpricehistory`
  ADD CONSTRAINT `FK_MaterialCD_mph` FOREIGN KEY (`MaterialCD`) REFERENCES `material` (`MaterialCD`);

================================================================================================================================================

CREATE TABLE receptioninvoiceheader(
	RCV_InvoiceID varchar(15) NOT NULL,
	ReceptionID varchar(15) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	DPP FLOAT NOT NULL,
	PPN FLOAT NOT NULL,
	TotalAmount FLOAT NOT NULL,
	TaxInvoiceNumber varchar(20) DEFAULT NULL,
	TaxInvoiceDate DATE DEFAULT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (RCV_InvoiceID)
);

ALTER TABLE `receptioninvoiceheader`
  ADD CONSTRAINT `FK_ReceptionID_rcinvhdr` FOREIGN KEY (`ReceptionID`) REFERENCES `receptionheader` (`ReceptionID`),
  ADD CONSTRAINT `FK_CategoryCD_rcinvhdr` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`);

CREATE TABLE receptioninvoicedetail(
	RCV_InvoiceID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	ItemCD varchar(20) NOT NULL,
	Quantity FLOAT NOT NULL,
	UnitCD varchar(5) NOT NULL,
	Price FLOAT NOT NULL,
	DPP FLOAT NOT NULL,
	PPN FLOAT NOT NULL,
	Subtotal FLOAT NOT NULL
);

ALTER TABLE `receptioninvoicedetail`
  ADD CONSTRAINT `FK_RCV_InvoiceID_rcinvdtl` FOREIGN KEY (`RCV_InvoiceID`) REFERENCES `receptioninvoiceheader` (`RCV_InvoiceID`),
  ADD CONSTRAINT `FK_UnitCD_rcinvdtl` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);

================================================================================================================================================

CREATE TABLE machine(
	MachineCD varchar(20) NOT NULL,
	MachineName tinytext NOT NULL,
	Sequence int(5) DEFAULT NULL,
	Speed int(3) NOT NULL,
	Cavity int(4) NOT NULL,
	MinTargetPerHour int(9) NOT NULL,
	MaxTargetPerHour int(9) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (MachineCD)
)ENGINE=INNODB;

CREATE TABLE productionorder(
	ProductionOrderID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	Description tinytext DEFAULT NULL,
	GroupCD varchar(5) NOT NULL,
	MachineCD varchar(20) NOT NULL,
	ProductCD varchar(20) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	QtyOrder FLOAT NOT NULL,
	QtyProduced FLOAT NOT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (ProductionOrderID)
)ENGINE=INNODB;

ALTER TABLE `productionorder`
  ADD CONSTRAINT `FK_GroupCD_productionorder` FOREIGN KEY (`GroupCD`) REFERENCES `groups` (`GroupCD`),
  ADD CONSTRAINT `FK_MachineCD_productionorder` FOREIGN KEY (`MachineCD`) REFERENCES `machine` (`MachineCD`),
  ADD CONSTRAINT `FK_UnitCD_productionorder` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`),
  ADD CONSTRAINT `FK_ProductCD_productionorder` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`);

CREATE TABLE productionresulthistory(
	ProductionOrderID varchar(15) NOT NULL,
	GroupCD varchar(5) NOT NULL,
	MachineCD varchar(20) NOT NULL,
	ProductCD varchar(20) NOT NULL,
	CreatedOn date NOT NULL,
	WorkingHour int(2) NOT NULL,
	ProdOutcome FLOAT NOT NULL,
	TotalWeight FLOAT NOT NULL,
	Shift int(1) NOT NULL
)ENGINE=INNODB;

ALTER TABLE `productionresulthistory`
  ADD CONSTRAINT `FK_ProductionOrderID_prodreshist` FOREIGN KEY (`ProductionOrderID`) REFERENCES `productionorder` (`ProductionOrderID`),
  ADD CONSTRAINT `FK_GroupCD_prodreshist` FOREIGN KEY (`GroupCD`) REFERENCES `groups` (`GroupCD`),
  ADD CONSTRAINT `FK_MachineCD_prodreshist` FOREIGN KEY (`MachineCD`) REFERENCES `machine` (`MachineCD`),
  ADD CONSTRAINT `FK_ProductCD_prodreshist` FOREIGN KEY (`ProductCD`) REFERENCES `product` (`ProductCD`);

================================================================================================================================================

CREATE TABLE supportinggoods(
	GoodsCD varchar(20) NOT NULL,
	GoodsName tinytext NOT NULL,
	Sequence int(5) DEFAULT NULL,
	StockQty int(9) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	GroupCD varchar(5) NOT NULL,
	SupplierNum int(5) NOT NULL,
	BuyPrice FLOAT NOT NULL,
	Tax int(1) NOT NULL,
	Desc_1 tinytext DEFAULT NULL,
	Desc_2 tinytext DEFAULT NULL,
	Desc_3 tinytext DEFAULT NULL,
	LastEdit datetime NOT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (GoodsCD)
)ENGINE=INNODB;

ALTER TABLE `supportinggoods`
  ADD CONSTRAINT `FK_UnitCD_suppgoods` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`),
  ADD CONSTRAINT `FK_CategoryCD_suppgoods` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_SupplierNum_suppgoods` FOREIGN KEY (`SupplierNum`) REFERENCES `supplier` (`SupplierNum`),
  ADD CONSTRAINT `FK_GroupCD_suppgoods` FOREIGN KEY (`GroupCD`) REFERENCES `groups` (`GroupCD`);
  
CREATE TABLE sparepart(
	PartCD varchar(20) NOT NULL,
	PartName tinytext NOT NULL,
	Sequence int(5) DEFAULT NULL,
	StockQty int(9) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	GroupCD varchar(5) NOT NULL,
	SupplierNum int(5) NOT NULL,
	BuyPrice FLOAT NOT NULL,
	Tax int(1) NOT NULL,
	Desc_1 tinytext DEFAULT NULL,
	Desc_2 tinytext DEFAULT NULL,
	Desc_3 tinytext DEFAULT NULL,
	LastEdit datetime NOT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (PartCD)
)ENGINE=INNODB;

ALTER TABLE `sparepart`
  ADD CONSTRAINT `FK_UnitCD_sparepart` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`),
  ADD CONSTRAINT `FK_CategoryCD_sparepart` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_SupplierNum_ssparepart` FOREIGN KEY (`SupplierNum`) REFERENCES `supplier` (`SupplierNum`),
  ADD CONSTRAINT `FK_GroupCD_sparepart` FOREIGN KEY (`GroupCD`) REFERENCES `groups` (`GroupCD`);

================================================================================================================================================

CREATE TABLE otherflowhistory(
	No int auto_increment,
	Date datetime NOT NULL,
	ReferenceKey varchar(15) NOT NULL,
	ItemCD varchar(20) NOT NULL,
	FlowIn int(10) NOT NULL,
	FlowOut int(10) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	PRIMARY KEY (No)
)ENGINE=INNODB;

================================================================================================================================================

CREATE TABLE logo(
	No int auto_increment,
	LogoName TINYTEXT NOT NULL,
	PRIMARY KEY (No)
)ENGINE=INNODB;

CREATE TABLE `useraccesslevel` (
  `UserID` varchar(5) NOT NULL,
  `Produk` varchar(10) NOT NULL,
  `BahanBaku` varchar(10) NOT NULL,
  `PenunjangProduksi` varchar(10) NOT NULL,
  `SparePart` varchar(10) NOT NULL,
  `Satuan` varchar(10) NOT NULL,
  `Kategori` varchar(10) NOT NULL,
  `Grup` varchar(10) NOT NULL,
  `Gudang` varchar(10) NOT NULL,
  `PriceList` varchar(10) NOT NULL,
  `Pelanggan` varchar(10) NOT NULL,
  `Supplier` varchar(10) NOT NULL,
  `Kota` varchar(10) NOT NULL,
  `ContactPerson` varchar(10) NOT NULL,
  `TipePembayaran` varchar(10) NOT NULL,
  `Jurnal` varchar(10) NOT NULL,
  `KodeAkun` varchar(10) NOT NULL,
  `TipeTransaksi` varchar(10) NOT NULL,
  `Pajak` varchar(10) NOT NULL,
  `tSalesOrder` varchar(10) NOT NULL,
  `tInvoice` varchar(10) NOT NULL,
  `tPOBahan` varchar(10) NOT NULL,
  `tPOPPSP` varchar(10) NOT NULL,
  `tPenerimaanBarang` varchar(10) NOT NULL,
  `tInvoicePembelian` varchar(10) NOT NULL,
  `tImport` varchar(10) NOT NULL,
  `rSO` varchar(10) NOT NULL,
  `rInvoice` varchar(10) NOT NULL,
  `rHutangPiutang` varchar(10) NOT NULL,
  `rProduk` varchar(10) NOT NULL,
  `rBahan Baku` varchar(10) NOT NULL,
  `System Log` varchar(10) NOT NULL,
  `pMesin` varchar(10) NOT NULL,
  `pSPK` varchar(10) NOT NULL,
  `pHasilProduksi` varchar(10) NOT NULL,
  `tSaldoAwal` varchar(10) NOT NULL,
  `tProduk` varchar(10) NOT NULL,
  `tBahanBaku` varchar(10) NOT NULL,
  `tPelunasanHutang` varchar(10) NOT NULL,
  `tPelunasanPiutang` varchar(10) NOT NULL,
  `pProsesProduksi` varchar(10) NOT NULL,
  `rPemlokal` varchar(10) NOT NULL,
  `rPemImport` varchar(10) NOT NULL,
  `rHutang` varchar(10) NOT NULL,
  `rPiutang` varchar(10) NOT NULL,
  `rPMasuk` varchar(10) NOT NULL,
  `rPKeluar` varchar(10) NOT NULL,
  `rMKeluar` varchar(10) NOT NULL,
  `rMMasuk` varchar(10) NOT NULL,
  `SystemLog` varchar(10) NOT NULL,
  `mutasibtm` varchar(10) NOT NULL,
  `mutasispp` varchar(10) NOT NULL,
  `tPenerimaanBarangI` varchar(10) NOT NULL,
  `mutasisprt` varchar(10) NOT NULL
) ENGINE=InnoDB;

================================================================================================================================================

CREATE TABLE importpurchaseorderheader(
	PurchaseOrderID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	DeliveryDate date NOT NULL,
	ShippingAddress TINYTEXT NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	SupplierNum int(5) NOT NULL,
	Termin int(2) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	TotalPurchase float DEFAULT NULL,
	TotalPaid float DEFAULT NULL,
	ApprovalStatus varchar(10) DEFAULT NULL,
	ApprovalBy varchar(5) DEFAULT NULL,
	ApprovalOn datetime DEFAULT NULL,
	LastEdit datetime NOT NULL,
	Finish int(1) NOT NULL,
	PRIMARY KEY (PurchaseOrderID)
) ENGINE=InnoDB;

ALTER TABLE `importpurchaseorderheader`
  ADD CONSTRAINT `FK_CategoryCD_importpoheader` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_SupplierNum_importpoheader` FOREIGN KEY (`SupplierNum`) REFERENCES `supplier` (`SupplierNum`);
  
CREATE TABLE importpurchaseorderdetail(
	PurchaseOrderID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	ItemCD varchar(20) NOT NULL,
	Quantity int(10) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	Price FLOAT NOT NULL,
	Subtotal FLOAT NOT NULL,
	QuantityReceived int(10) NOT NULL
) ENGINE=InnoDB;

ALTER TABLE `importpurchaseorderdetail`
  ADD CONSTRAINT `FK_PurchaseOrderID_importpodetail` FOREIGN KEY (`PurchaseOrderID`) REFERENCES `importpurchaseorderheader` (`PurchaseOrderID`),
  ADD CONSTRAINT `FK_UnitCD_importpodetail` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);

CREATE TABLE importreceptionheader(
	ReceptionID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	PurchaseOrderID varchar(15) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	WarehCD varchar(10) NOT NULL,
	Termin int(2) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	Invoice TINYTEXT DEFAULT NULL,
	PackingList TINYTEXT DEFAULT NULL,
	BL TINYTEXT DEFAULT NULL,
	Insurance TINYTEXT DEFAULT NULL,
	LastEdit datetime NOT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (ReceptionID)
) ENGINE=InnoDB;

ALTER TABLE `importreceptionheader`
  ADD CONSTRAINT `FK_PurchaseOrderID_importreceptionheader` FOREIGN KEY (`PurchaseOrderID`) REFERENCES `importpurchaseorderheader` (`PurchaseOrderID`),
  ADD CONSTRAINT `FK_CategoryCD_importreceptionheader` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`),
  ADD CONSTRAINT `FK_WarehCD_importreceptionheader` FOREIGN KEY (`WarehCD`) REFERENCES `warehouse` (`WarehCD`);

CREATE TABLE importreceptiondetail(
	ReceptionID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	ItemCD varchar(20) NOT NULL,
	Quantity_1 FLOAT NOT NULL,
	UnitCD_1 varchar(5) NOT NULL,
	Quantity_2 FLOAT DEFAULT NULL,
	UnitCD_2 varchar(5) DEFAULT NULL,
	documentimageI_1 tinytext DEFAULT NULL,
	documentimageI_2 tinytext DEFAULT NULL
) ENGINE=InnoDB;

ALTER TABLE `importreceptiondetail`
  ADD CONSTRAINT `FK_ReceptionID_importreceptiondetail` FOREIGN KEY (`ReceptionID`) REFERENCES `importreceptionheader` (`ReceptionID`);
  
CREATE TABLE importreceptioninvoiceheader(
	RCV_InvoiceID varchar(15) NOT NULL,
	ReceptionID varchar(15) NOT NULL,
	CategoryCD varchar(5) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	DPP FLOAT NOT NULL,
	BM FLOAT NOT NULL,
	PPN FLOAT NOT NULL,
	PPH FLOAT NOT NULL,
	TotalAmount FLOAT NOT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY (RCV_InvoiceID)
) ENGINE=InnoDB;

ALTER TABLE `importreceptioninvoiceheader`
  ADD CONSTRAINT `FK_ReceptionID_importrcinvhdr` FOREIGN KEY (`ReceptionID`) REFERENCES `importreceptionheader` (`ReceptionID`),
  ADD CONSTRAINT `FK_CategoryCD_importrcinvhdr` FOREIGN KEY (`CategoryCD`) REFERENCES `category` (`CategoryCD`);

CREATE TABLE importreceptioninvoicedetail(
	RCV_InvoiceID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	ItemCD varchar(20) NOT NULL,
	Quantity FLOAT NOT NULL,
	UnitCD varchar(5) NOT NULL,
	Price FLOAT NOT NULL,
	DPP FLOAT NOT NULL,
	PPN FLOAT NOT NULL,
	Subtotal FLOAT NOT NULL
) ENGINE=InnoDB;

ALTER TABLE `importreceptioninvoicedetail`
  ADD CONSTRAINT `FK_RCV_InvoiceID_importrcinvdtl` FOREIGN KEY (`RCV_InvoiceID`) REFERENCES `importreceptioninvoiceheader` (`RCV_InvoiceID`),
  ADD CONSTRAINT `FK_UnitCD_importrcinvdtl` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);

===============================================================================================================================================

CREATE TABLE IF NOT EXISTS `mutationdetailbtm` (
	`MutationID` varchar(13) NOT NULL,
	`CreatedOn` date NOT NULL, 
	`FlowIn` varchar(5) DEFAULT NULL, 
	`FlowOut` varchar(5) DEFAULT NULL, 
	`UnitCD_1` varchar(5) NOT NULL, 
	`Description` varchar(50) NOT NULL, 
	`MaterialCD` varchar(20) NOT NULL, 
	PRIMARY KEY (`MutationID`) 
) ENGINE=INNODB;

CREATE TABLE taxserialnumber(
	SerialID int(5) NOT NULL,
	Description TINYTEXT NOT NULL,
	Prefix varchar(12) NOT NULL,
	StartDate date NOT NULL,
	EndDate date NOT NULL,
	StartNumber varchar(10) NOT NULL,
	EndNumber varchar(10) NOT NULL,
	LastNumberFlag varchar(10) NOT NULL,
	UsedNumber int(5) NOT NULL,
	TotalNumber int(5) NOT NULL,
	PRIMARY KEY (SerialID)
) ENGINE=InnoDB;

===============================================================================================================================================

CREATE TABLE `mutationdetailbpp` (
	`MutationID` varchar(13) NOT NULL,
	`CreatedOn` date NOT NULL,
	`FlowIn` varchar(5) NOT NULL,
	`FlowOut` varchar(5) NOT NULL,
	`UnitCD_1` varchar(5) NOT NULL,
	`Description` varchar(50) NOT NULL,
	`GoodsCD` varchar(20) NOT NULL,
	PRIMARY KEY (`MutationID`)
) ENGINE=InnoDB;

CREATE TABLE `mutationdetailsprt` (
	`MutationID` varchar(13) COLLATE utf8mb4_general_ci NOT NULL,
	`CreatedOn` date NOT NULL,
	`FlowIn` varchar(5) NOT NULL,
	`FlowOut` varchar(5) NOT NULL,
	`UnitCD` varchar(5) NOT NULL,
	`Description` tinytext NOT NULL,
	`PartCD` varchar(20) NOT NULL,
	PRIMARY KEY (`MutationID`)
) ENGINE=InnoDB;

CREATE TABLE `sparepartflowhistory` (
	`No` int NOT NULL AUTO_INCREMENT,
	`Date` date NOT NULL,
	`ReferenceKey` varchar(15) NOT NULL,
	`PartCD` varchar(20) NOT NULL,
	`FlowIn` int NOT NULL,
	`FlowOut` int NOT NULL,
	`Description` tinytext NOT NULL,
	PRIMARY KEY (`No`)
) ENGINE=InnoDB;

===============================================================================================================================================

CREATE TABLE `downpaymentheader` (
	DPID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	SalesOrderID varchar(15) NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	PRIMARY KEY (DPID)
) ENGINE=InnoDB;

ALTER TABLE `downpaymentheader`
	ADD CONSTRAINT `FK_SalesOrderID_dpheader` FOREIGN KEY (`SalesOrderID`) REFERENCES `salesorderheader` (`SalesOrderID`);

CREATE TABLE `downpaymentdetail` (
	DPID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	Amount FLOAT NOT NULL
) ENGINE=InnoDB;

ALTER TABLE `downpaymentdetail`
	ADD CONSTRAINT `FK_SalesOrderID_dpdetail` FOREIGN KEY (`DPID`) REFERENCES `downpaymentheader` (`DPID`);

CREATE TABLE advancepayment(
	AdvPaymentID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	CustID int(5) NOT NULL,
	AccountCD varchar(10) NOT NULL,
	Amount FLOAT NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	PaymentBy varchar(20) NOT NULL,
	TotalUsage FLOAT DEFAULT NULL,
	Status int(1) NOT NULL,
	PRIMARY KEY(AdvPaymentID)
) ENGINE=InnoDB;

ALTER TABLE `advancepayment`
	ADD CONSTRAINT `FK_CustID_advpayment` FOREIGN KEY (`CustID`) REFERENCES `customer` (`CustID`),
	ADD CONSTRAINT `FK_AccountCD_advpayment` FOREIGN KEY (`AccountCD`) REFERENCES `chartofaccount` (`AccountCD`);

CREATE TABLE advancepaymentusage(
	AdvPaymentID varchar(15) NOT NULL,
	CreatedOn datetime NOT NULL,
	InvoiceID varchar(15) NOT NULL,
	Amount FLOAT NOT NULL,
	Description TINYTEXT DEFAULT NULL
) ENGINE=InnoDB;

ALTER TABLE `advancepaymentusage`
	ADD CONSTRAINT `FK_AdvPaymentID_advpaymentusage` FOREIGN KEY (`AdvPaymentID`) REFERENCES `advancepayment` (`AdvPaymentID`),
	ADD CONSTRAINT `FK_InvoiceID_advpaymentusage` FOREIGN KEY (`InvoiceID`) REFERENCES `invoiceheader` (`InvoiceID`);

CREATE TABLE genjournalheader(
	GenJourID varchar(10) NOT NULL,
	JournalDate date NOT NULL,
	CreatedOn date NOT NULL,
	MemoID varchar(10) NOT NULL,
	MemoDesc TINYTEXT NOT NULL,
	Description TINYTEXT NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	PRIMARY KEY (GenJourID)
) ENGINE=InnoDB;

CREATE TABLE genjournaldetail(
	GenJourID varchar(10) NOT NULL,
	JournalDate date NOT NULL,
	AccountCD varchar(10) NOT NULL,
	AccountName TINYTEXT NOT NULL,
	Debit FLOAT DEFAULT NULL,
	Credit FLOAT DEFAULT NULL
) ENGINE=InnoDB;

ALTER TABLE `genjournaldetail`
	ADD CONSTRAINT `FK_GenJourID_genjournaldetail` FOREIGN KEY (`GenJourID`) REFERENCES `genjournalheader` (`GenJourID`),
	ADD CONSTRAINT `FK_AccountCD_genjournaldetail` FOREIGN KEY (`AccountCD`) REFERENCES `chartofaccount` (`AccountCD`);

CREATE TABLE journaldata(
	JournalDate date NOT NULL,
	AccountCD varchar(10) NOT NULL,
	AccountName TINYTEXT NOT NULL,
	Debit FLOAT DEFAULT NULL,
	Credit FLOAT DEFAULT NULL
) ENGINE=InnoDB;

ALTER TABLE `journaldata`
	ADD CONSTRAINT `FK_AccountCD_journaldata` FOREIGN KEY (`AccountCD`) REFERENCES `chartofaccount` (`AccountCD`);

CREATE TABLE othexpenseheader(
	OthExpenseID varchar(10) NOT NULL,
	JournalDate date NOT NULL,
	CreatedOn date NOT NULL,
	MemoID varchar(10) NOT NULL,
	MemoDesc TINYTEXT NOT NULL,
	Description TINYTEXT NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	PRIMARY KEY (OthExpenseID)
) ENGINE=InnoDB;

CREATE TABLE othexpensedetail(
	OthExpenseID varchar(10) NOT NULL,
	JournalDate date NOT NULL,
	AccountCD varchar(10) NOT NULL,
	AccountName TINYTEXT NOT NULL,
	Debit FLOAT DEFAULT NULL,
	Credit FLOAT DEFAULT NULL
) ENGINE=InnoDB;

ALTER TABLE `othexpensedetail`
	ADD CONSTRAINT `FK_OthExpenseID_othexpensedetail` FOREIGN KEY (`OthExpenseID`) REFERENCES `othexpenseheader` (`OthExpenseID`),
	ADD CONSTRAINT `FK_AccountCD_othexpensedetail` FOREIGN KEY (`AccountCD`) REFERENCES `chartofaccount` (`AccountCD`);

===============================================================================================================================================

5-1000	Bi.Pemakaian Bahan
5-2000	Bi.Upah Langsung
5-3700	Bi. Pabrikasi & Penyusutan Mesin
1-1830	Persediaan Awal Brg Dlm Proses
1-1840	Persediaan Awal Brg Jadi
1-1860	Persediaan Awal Bahan
1-1870	Persediaan Akhir Bahan
1-1880	Persediaan Akhir Brg Dlm Proses
1-1890	Persediaan Akhir Brg Jadi
6-1210	Bi. Penyusutan Kendaraan Niaga
2-1540	Utang Pajak (PPh 25/29)
9-6100	Bi. PPh Bunga Jasa Giro
8-1500	Pendapatan Jasa Giro
8-2000	Pendapatan Rupa-Rupa

CREATE TABLE creditpaymentheader(
	CreditPaymentID varchar(6) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	CustID int(5) NOT NULL,
	PaymentMethod TINYTEXT NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	PRIMARY KEY (CreditPaymentID)
) ENGINE=InnoDB;

CREATE TABLE creditpaymentdetail(
	CreditPaymentID varchar(6) NOT NULL,
	CreatedOn datetime NOT NULL,
	InvoiceID varchar(15) NOT NULL,
	TotalPayment FLOAT DEFAULT NULL
) ENGINE=InnoDB;

ALTER TABLE `creditpaymentdetail`
	ADD CONSTRAINT `FK_CreditPaymentID_creditpaymentdetail` FOREIGN KEY (`CreditPaymentID`) REFERENCES `creditpaymentheader` (`CreditPaymentID`),
	ADD CONSTRAINT `FK_InvoiceID_creditpaymentdetail` FOREIGN KEY (`InvoiceID`) REFERENCES `invoiceheader` (`InvoiceID`);

CREATE TABLE debtpaymentheader(
	DebtPaymentID varchar(6) NOT NULL,
	CreatedOn datetime NOT NULL,
	CreatedBy varchar(5) NOT NULL,
	SupplierNum int(5) NOT NULL,
	PaymentMethod TINYTEXT NOT NULL,
	Description TINYTEXT DEFAULT NULL,
	PRIMARY KEY (DebtPaymentID)
) ENGINE=InnoDB;

CREATE TABLE debtpaymentdetail(
	DebtPaymentID varchar(6) NOT NULL,
	CreatedOn datetime NOT NULL,
	RCV_InvoiceID varchar(15) NOT NULL,
	TotalPayment FLOAT DEFAULT NULL
) ENGINE=InnoDB;

ALTER TABLE `debtpaymentdetail`
	ADD CONSTRAINT `FK_DebtPaymentID_debtpaymentdetail` FOREIGN KEY (`DebtPaymentID`) REFERENCES `debtpaymentheader` (`DebtPaymentID`),
	ADD CONSTRAINT `FK_RCV_InvoiceID_debtpaymentdetail` FOREIGN KEY (`RCV_InvoiceID`) REFERENCES `receptioninvoiceheader` (`RCV_InvoiceID`);

===============================================================================================================================================

CREATE TABLE datapersediaan(
	Nomor int auto_increment,
	Tanggal date NOT NULL,
	Pers_Akhir_Bahan FLOAT DEFAULT NULL,
	Pers_Akhir_Brg_Dlm_Proses FLOAT DEFAULT NULL,
	Pers_Akhir_Brg_Jadi FLOAT DEFAULT NULL
) ENGINE=InnoDB;

===============================================================================================================================================

CREATE TABLE employee(
	NIK varchar(10) NOT NULL,
	EmpFrontName TINYTEXT NOT NULL,
	EmpLastName TINYTEXT,
	BornCity TINYTEXT NOT NULL,
	DateOfBirth DATE NOT NULL,
	Address TINYTEXT NOT NULL,
	City TINYTEXT NOT NULL,
	Gender TINYTEXT NOT NULL,
	LastEducation TINYTEXT NOT NULL,
	Position TINYTEXT NOT NULL,
	Status TINYTEXT NOT NULL,
	WorkingHours int(2) NOT NULL,
	BreakTime varchar(3) NOT NULL,
	CreatedOn datetime NOT NULL,
	PRIMARY KEY (NIK)
) ENGINE=InnoDB;
	

CREATE TABLE salarycomponent(
	ComponentCode varchar(20) NOT NULL,
	ComponentName TINYTEXT NOT NULL,
	ComponentType TINYTEXT NOT NULL,
	PRIMARY KEY (ComponentCode)
) ENGINE=InnoDB;

CREATE TABLE employeecomponent(
	NIK varchar(10) NOT NULL,
	ComponentCode varchar(20) NOT NULL,
	ComponentValue int(10) NOT NULL
) ENGINE=InnoDB;
ALTER TABLE `employeecomponent`
	ADD CONSTRAINT `FK_NIK_employeecomponent` FOREIGN KEY (`NIK`) REFERENCES `employee` (`NIK`),
	ADD CONSTRAINT `FK_ComponentCode_InvoiceID_employeecomponent` FOREIGN KEY (`ComponentCode`) REFERENCES `salarycomponent` (`ComponentCode`);
	
===============================================================================================================================================

CREATE TABLE emp_attendance(
	NIK varchar(10) NOT NULL,
	Date DATE NOT NULL,
	CheckIn varchar(5) NOT NULL,
	CheckOut varchar(5) NOT NULL,
	WorkingHour int(5) NOT NULL,
	Overtime int(5) NOT NULL
) ENGINE=InnoDB;
ALTER TABLE `emp_attendance`
	ADD CONSTRAINT `FK_NIK_emp_attendance` FOREIGN KEY (`NIK`) REFERENCES `employee` (`NIK`);
	
CREATE TABLE empsalaryheader(
	SlipNum varchar(15) NOT NULL,
	NIK varchar(10) NOT NULL,
	CreatedOn DATE NOT NULL,
	Periode varchar(20) NOT NULL,
	PrintDate DATE,
	PRIMARY KEY (SlipNum)
) ENGINE=InnoDB;
ALTER TABLE `empsalaryheader`
	ADD CONSTRAINT `FK_NIK_empsalaryh` FOREIGN KEY (`NIK`) REFERENCES `employee` (`NIK`);
	
CREATE TABLE empsalarydetail(
	SlipNum varchar(15) NOT NULL,
	NIK varchar(10) NOT NULL,
	Periode varchar(20) NOT NULL,
	ComponentCode varchar(20) NOT NULL,
	ComponentValue int(10) NOT NULL,
	Multiplier int(10) NOT NULL
) ENGINE=InnoDB;
ALTER TABLE `empsalarydetail`
	ADD CONSTRAINT `FK_SlipNum_empsalaryd` FOREIGN KEY (`SlipNum`) REFERENCES `empsalaryheader` (`SlipNum`),
	ADD CONSTRAINT `FK_NIK_empsalaryd` FOREIGN KEY (`NIK`) REFERENCES `employee` (`NIK`);

===============================================================================================================================================

CREATE TABLE materialreleaseorder(
	ReleaseOrderID varchar(15) NOT NULL,
	CreatedOn DATETIME NOT NULL,
	MaterialCD varchar(20) NOT NULL,
	GroupCD varchar(5) NOT NULL,
	Quantity int(20) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	Description TINYTEXT,
	CreatedBy varchar(5) NOT NULL,
	PRIMARY KEY(ReleaseOrderID)
) ENGINE=InnoDB;
ALTER TABLE `materialreleaseorder`
	ADD CONSTRAINT `FK_MaterialCD_MRO` FOREIGN KEY (`MaterialCD`) REFERENCES `material` (`MaterialCD`),
	ADD CONSTRAINT `FK_GroupCD_MRO` FOREIGN KEY (`GroupCD`) REFERENCES `groups` (`GroupCD`),
	ADD CONSTRAINT `FK_UnitCD_MRO` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`),
	ADD CONSTRAINT `FK_UserID_MRO` FOREIGN KEY (`CreatedBy`) REFERENCES `systemuser` (`UserID`);
	
CREATE TABLE mat_ppk_ledger(
	No int auto_increment,
	CreatedOn DATETIME NOT NULL,
	ReferenceKey varchar(15) NOT NULL,
	MaterialCD varchar(20) NOT NULL,
	Quantity int(20) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	InVsOut int(1) NOT NULL,
	RemainingAmount int(10) NOT NULL,
	PRIMARY KEY(No)
) ENGINE=InnoDB;
ALTER TABLE `mat_ppk_ledger`
	ADD CONSTRAINT `FK_UnitCD_PPK_LDG` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);

CREATE TABLE mat_pph_ledger(
	No int auto_increment,
	CreatedOn DATETIME NOT NULL,
	ReferenceKey varchar(15) NOT NULL,
	MaterialCD varchar(20) NOT NULL,
	Quantity int(20) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	InVsOut int(1) NOT NULL,
	RemainingAmount int(10) NOT NULL,
	PRIMARY KEY(No)
) ENGINE=InnoDB;
ALTER TABLE `mat_pph_ledger`
	ADD CONSTRAINT `FK_UnitCD_PPH_LDG` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);

CREATE TABLE mat_petk_ledger(
	No int auto_increment,
	CreatedOn DATETIME NOT NULL,
	ReferenceKey varchar(15) NOT NULL,
	MaterialCD varchar(20) NOT NULL,
	Quantity int(20) NOT NULL,
	UnitCD varchar(5) NOT NULL,
	InVsOut int(1) NOT NULL,
	RemainingAmount int(10) NOT NULL,
	PRIMARY KEY(No)
) ENGINE=InnoDB;
ALTER TABLE `mat_petk_ledger`
	ADD CONSTRAINT `FK_UnitCD_PETK_LDG` FOREIGN KEY (`UnitCD`) REFERENCES `unit` (`UnitCD`);

===============================================================================================================================================